var bodyWidth=document.body.clientWidth,bodyHeight=document.body.clientHeight,fps=60,frameTime=1e3/fps,getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e))+e},getDegree=function(e){return e/Math.PI*180},getRadian=function(e){return e*Math.PI/180},debounce=function(e,t,i){var r;e.addEventListener(t,function(e){clearTimeout(r),r=setTimeout(function(){i(e)},500)},!1)},lastTimeRender,renderer,scene,canvas,camera,trackball,directionalLight,pointLight,spotLight,hemisphereLight,ambientLight,directionalLightHelper,pointLightHelper,spotLightHelper,hemisphereLightHelper,boxObjArr=[],threeStart=function(){initThree(),initCamera(),initLight();for(var e=0;128>e;e++)boxObjArr[e]=new boxObj,boxObjArr[e].rad=getRadian(16*e),boxObjArr[e].rad2=getRadian(20*Math.floor(e/10)),boxObjArr[e].changePositionVal(),boxObjArr[e].setPosition(),boxObjArr[e].changeRotationVal(),boxObjArr[e].setRotation(),scene.add(boxObjArr[e].mesh);renderloop()},initThree=function(){canvas=document.getElementById("canvas"),renderer=new THREE.WebGLRenderer({antialias:!0}),renderer||alert("Three.jsの初期化に失敗しました。"),renderer.setSize(bodyWidth,bodyHeight),canvas.appendChild(renderer.domElement),renderer.setClearColor(0,1),scene=new THREE.Scene},initCamera=function(){camera=new THREE.PerspectiveCamera(45,bodyWidth/bodyHeight,1,1e4),camera.position.set(500,500,500),camera.up.set(0,0,1),camera.lookAt({x:0,y:0,z:0}),trackball=new THREE.TrackballControls(camera,canvas),trackball.screen.width=bodyWidth,trackball.screen.height=bodyHeight,trackball.noRotate=!1,trackball.rotateSpeed=3,trackball.noZoom=!1,trackball.zoomSpeed=1,trackball.noPan=!0},initLight=function(){pointLight=new THREE.PointLight(16777215,1),pointLight.position.set(0,0,0),pointLightHelper=new THREE.PointLightHelper(pointLight,1),ambientLight=new THREE.AmbientLight(1118481),scene.add(pointLight),scene.add(ambientLight);var e=new lightSphereObj;e.setPosition(),scene.add(e.mesh)},lightSphereObj=function(){this.r=60,this.x=0,this.y=0,this.z=0,this.segments=24,this.geometry=new THREE.SphereGeometry(this.r,this.segments),this.material=new THREE.MeshLambertMaterial({color:16777215,emissive:16777215,opacity:.9,transparent:!0}),this.mesh=new THREE.Mesh(this.geometry,this.material)};lightSphereObj.prototype.setPosition=function(){this.mesh.position.set(this.x,this.y,this.z)};var boxObj=function(){this.size=getRandomInt(8,36),this.rad=0,this.rad2=0,this.r=240,this.x=0,this.y=0,this.z=0,this.rotateX=0,this.rotateY=0,this.rotateZ=0,this.geometry=new THREE.BoxGeometry(this.size,this.size,this.size),this.material=new THREE.MeshLambertMaterial({color:16777215}),this.mesh=new THREE.Mesh(this.geometry,this.material)};boxObj.prototype.changePositionVal=function(){this.x=Math.cos(this.rad)*Math.cos(this.rad2)*this.r,this.y=Math.cos(this.rad)*Math.sin(this.rad2)*this.r,this.z=Math.sin(this.rad)*this.r},boxObj.prototype.setPosition=function(){this.mesh.position.set(this.x,this.y,this.z)},boxObj.prototype.changeRotationVal=function(){this.rotateX=2*this.rad,this.rotateY=2*this.rad,this.rotateZ=2*this.rad2},boxObj.prototype.setRotation=function(){this.mesh.rotation.set(this.rotateX,this.rotateY,this.rotateZ)};var render=function(){renderer.clear();for(var e=0;e<boxObjArr.length;e++)boxObjArr[e].rad+=getRadian(.5),boxObjArr[e].rad2+=getRadian(.5),boxObjArr[e].changePositionVal(),boxObjArr[e].setPosition(),boxObjArr[e].changeRotationVal(),boxObjArr[e].setRotation();renderer.render(scene,camera),trackball.update()},renderloop=function(){var e=+new Date;requestAnimationFrame(renderloop),frameTime>e-lastTimeRender||(render(),lastTimeRender=+new Date)},resizeRenderer=function(){bodyWidth=document.body.clientWidth,bodyHeight=document.body.clientHeight,console.log(renderer),renderer.setSize(bodyWidth,bodyHeight),initCamera()};debounce(window,"resize",function(){resizeRenderer()}),threeStart();